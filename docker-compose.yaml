version: "3.9"

services:
    main:
      build:
            context: ./solarengine
            dockerfile: ./Dockerfile
      container_name: solarengine
      volumes:
        - ./solarengine:/usr/app
      entrypoint: pytest
    web:
      build:
          context: ./web
          dockerfile: ./Dockerfile
      container_name: solarengine-web
      ports:
          - "8000:8000"
      volumes:
        - ./web:/usr/app
      entrypoint: python3 manage.py runserver 0.0.0.0:8000

networks:
  nginx:
    external: true
